<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
        body{
            margin: 0;
            padding: 0;
        }
        .pubu{
            position: absolute;
            width: 1100px;
            left: 50%;
            margin-left: -550px;
        }
        .box{
            padding:20px 0 0 20px;
            float: left;
        }
        .box img{
            width: 200px;
            height: auto;
            opacity: 0;
        }
    </style>
</head>
<body>
<div class="pubu">
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
</div>

</body>
</html>
<script>
    window.onload = function(){
        var oBox = document.getElementsByClassName("box");
        var oImg = document.getElementsByTagName("img");
        var oBoxw = oBox[0].offsetWidth;
        var cols = 6;

        loadImg(oImg);
        window.onscroll = function(){
            loadImg(oImg);
        };

        function waterfall(ele,col,eleWidth){
            var hArr = [];
            for(var i=0;i<ele.length;i++){
                if(i < col){// 0 1 2 3 4 < col(5)
                    hArr.push(ele[i].offsetHeight);
                }else{
                    var minH = Math.min.apply(null,hArr);
                    var index = hArr.indexOf(minH);
                    ele[i].style.position = 'absolute';
                    ele[i].style.top = minH+'px';
                    ele[i].style.left = index * eleWidth+'px';
                    //把这张图片放进去后要改变当前的高度，方便下一张图片找到自己的位置
                    hArr[index] += ele[i].offsetHeight;
                }
            }
        }

        //图片懒加载
        function loadImg(arr){
            for(var i=0;i<arr.length;i++){
                if(arr[i].getBoundingClientRect().top < document.documentElement.clientHeight && !arr[i].isLoad){
                    arr[i].isLoad = true;
                    if(arr[i].dataset){
                        aftLoadImg(arr[i],arr[i].dataset.original);
                    }else{
                        aftLoadImg(arr[i],arr[i].getAttribute("data-original"));
                    }
                    arr[i].style.cssText = "transition:opacity 2s; opacity:1;";
                }
            }
        }
        function aftLoadImg(obj,url){
            obj.src = url;
            waterfall(oBox,cols,oBoxw);
        }
    }
</script>
